on: push
name: Execute test on push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ• Clone and checkout of the actual branch
        uses: actions/checkout@v2
      - name: Â©ï¸ Copy .env.example to .env
        run: |
          cp .env.example .env
      - name: ğŸ” Permissions
        run: make permissions
      - name: ğŸ Create .env
        run: make env/create
      - name: ğŸ‡ğŸ’¨ Run apps
        run: make run
      - name: ğŸ˜´ Sleep for 40 seconds
        uses: jakejarvis/wait-action@master
        with:
          time: '40s'
      - name: â˜¢ Execute API test
        run: make test/api
      - name: â˜¢ Execute frontend unit test
        run: make test/front-unit
      #- name: â˜¢ Execute frontend end to end testing
        #run: make test/front-e2e-headless
      - name: âœ‹ Stop containers
        run: make stop